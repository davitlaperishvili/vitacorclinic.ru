import{T as x,D as ut,e as W,c as ct}from"./links.BtZm82fD.js";import{a as B}from"./addons.BL-b166P.js";import{R as ht,a as gt}from"./RequiresUpdate.Cqzi3R9u.js";import{C as mt}from"./Index.DV-CGyz-.js";import{a as _t}from"./Header.DU0X2Pi2.js";import{n as Q}from"./numbers.BT5e8rgb.js";import{W as M}from"./WpTable.CFMkRqW5.js";import{C as F}from"./Table.JF4U36kH.js";import{P as V}from"./PostTypes.Cef6XkQ_.js";import{D as X}from"./Date.BoN5NRW1.js";import{C as Z}from"./Tooltip.DhkkBQWW.js";import{L as N,a as kt,b as tt,c as st,d as et,e as it,f as nt,S as ot}from"./Index.Cvkpmi8S.js";import{S as ft,e as bt}from"./index.Dbgw3oZ8.js";import{_ as $}from"./_plugin-vue_export-helper.BN1snXvA.js";import{v as o,o as d,c as I,k as _,l,a as i,t as r,C as b,B as u,G as C,E as D,q,b as f,j as St,F as Pt,J as wt}from"./runtime-dom.esm-bundler.tPRhSV4q.js";import{a as at,C as vt}from"./Caret.Ke5gylGO.js";import{a as O,S as U,b as K,c as E}from"./Affiliate.lZyZwhN4.js";import{C as rt}from"./Tabs.BdJDuw_m.js";import{S as z}from"./Suggestion.Coz9iGrB.js";import{S as lt}from"./Refresh.DRpUll-o.js";import yt from"./Overview.C-yE_a5a.js";import{J as It}from"./JsonValues.D25FTfEu.js";import{B as At}from"./Checkbox.CmdF-nFt.js";import{B as Tt}from"./Textarea.BItFOv10.js";import{C as Rt}from"./Card.CHgb8IZx.js";import{C as xt}from"./ExcludePosts.Bxlr7bdI.js";import{B as $t}from"./HighlightToggle.Dw6HlDD4.js";import{G as Lt,a as Ct}from"./Row.DRnp1mVs.js";import{C as Dt}from"./PostTypeOptions.CV-Y0BBh.js";import{C as Mt}from"./SettingsRow.BwYvQArk.js";import"./default-i18n.DXRQgkn2.js";import"./helpers.DWk2T5bC.js";import"./upperFirst.7wc0xztY.js";import"./_stringToArray.DnK4tKcY.js";import"./toString.Cp__a8QI.js";import"./RequiresUpdate.LHgX9J56.js";import"./license.DHbLXBun.js";import"./allowed.BpIEUKoe.js";import"./deburr.B1yvcqMY.js";/* empty css             */import"./params.B3T1WKlC.js";import"./Ellipse.BPggUP-m.js";import"./LicenseKeyBar.Ddr3Ewd2.js";import"./LogoGear.BbumEdXr.js";import"./Logo.bX-u9KVJ.js";import"./Support.DcbjlfoT.js";import"./Url.CLExatqF.js";import"./Exclamation.DGJubTNT.js";import"./Gear.DwDaVskn.js";import"./Slide.fjAuzpC8.js";import"./ScrollAndHighlight.BOx4qI47.js";import"./AnimatedNumber.DeYVxHDv.js";import"./constants.CPpKID74.js";import"./Index.ChPpw0uH.js";import"./Editor.XMzmLnz3.js";import"./isEqual.BUN2xwmw.js";import"./_baseIsEqual.DygU02n1.js";import"./_getTag.BDw1xlYp.js";import"./_baseClone.CV-8PC-R.js";import"./_arrayEach.Fgt6pfHj.js";import"./_getAllKeysIn.fN8NwDhg.js";import"./Plus.CG1QxokA.js";import"./TruSeoScore.DmC22Awy.js";import"./Information.Bv8uKEyF.js";import"./AddonConditions.CiZ37f2t.js";import"./Index.Cf5ujj4F.js";import"./Blur.CvHKqkVq.js";import"./DonutChartWithLegend.B20yT2Df.js";import"./SeoSiteScore.DCVfob0y.js";import"./Row.ClzcKm5C.js";import"./RequiredPlans.D_JN9Itl.js";import"./Checkmark.DOG99yeO.js";import"./AddPlus.D4iYGpm1.js";import"./External.BnlDuPIp.js";import"./Radio.DSWQpCaC.js";const Bt={setup(){return{linkAssistantStore:x()}},emits:["updated"],components:{CoreTooltip:Z,CoreWpTable:F,LinkAssistantConfirmationModal:N,LinkAssistantEditablePhrase:kt,SvgTrash:ft},mixins:[V,M,X],props:{domain:{type:String,required:!0},rows:{type:Array,required:!0},activeDomain:{type:Number}},data(){return{tableIdPrefix:"aioseo-domains-report-inner-",resultsPerPage:5,wpTableKey:0,activePost:-1,showModal:!1,action:"",selectedRows:null,bulkOptions:[{label:this.$t.__("Delete",this.$tdPro),value:"delete"}],strings:{delete:this.$t.__("Delete",this.$tdPro)},modalStrings:{areYouSureSingle:this.$t.__("Are you sure you want to delete these links for this domain?",this.$tdPro),areYouSureMultiple:this.$t.__("Are you sure you want to delete these links for this domain?",this.$tdPro),areYouSureAll:this.$t.__("Are you sure you want to delete all links for this domain?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),yesSingle:this.$t.__("Yes, I want to delete these links",this.$tdPro),yesMultiple:this.$t.__("Yes, I want to delete these links",this.$tdPro),yesAll:this.$t.__("Yes, I want to delete all links",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}}},computed:{tableId(){return this.tableIdPrefix+ut.now().toFormat("x")},columns(){return[{slug:"post_title",label:this.$t.__("Post Title",this.$tdPro)},{slug:"phrases",label:this.$t.__("Phrases with Links",this.$tdPro)},{slug:"publish_date",label:this.$t.__("Publish Date",this.$tdPro),width:"160px"},{slug:"delete",width:"50px"}]},shouldShowPagination(){return 1<this.rows[0].totals.pages},initialPageNumber(){if(this.linkAssistantStore.domainsReport.innerPagination===void 0||this.linkAssistantStore.domainsReport.innerPagination[this.domain]===void 0)return 1;const t=this.linkAssistantStore.domainsReport.innerPagination[this.domain];return t||1}},methods:{fetchData(t){return this.linkAssistantStore.setDomainsReportInnerPaginatedPage({domain:this.domain,page:this.pageNumber}),this.linkAssistantStore.fetchDomainsReportInner({...t,additionalFilters:{domainIndex:this.activeDomain,domain:this.domain}}).finally(()=>{this.wpTableKey++,this.$emit("updated")})},toggleShowMorePhrases(t){if(this.activePost===t){this.activePost=-1;return}this.activePost=t},deleteLink({postIndex:t,linkIndex:e}){this.wpTableLoading=!0,this.linkAssistantStore.domainsReportInnerLinkDelete({searchTerm:this.searchTerm,rows:this.rows,postIndex:t,linkIndex:e,offset:this.pageNumber===1?0:(this.pageNumber-1)*this.resultsPerPage}).finally(()=>{this.refreshTable().then(()=>{this.$emit("updated"),this.wpTableLoading=!1})})},saveModifiedPhrase(t){if(!this.linkAssistantStore.domainsReport.rows[this.activeDomain])return;const e=Object.keys(this.linkAssistantStore.domainsReport.rows[this.activeDomain])[0];!e||!this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex]||!this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex].links[t.phraseIndex]||this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex].links[t.phraseIndex].phrase_html!==t.phraseHtml&&(this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex].links[t.phraseIndex].phrase=t.phrase,this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex].links[t.phraseIndex].phrase_html=t.phraseHtml,this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex].links[t.phraseIndex].anchor=t.anchor,this.wpTableLoading=!0,this.linkAssistantStore.domainsReportInnerLinkUpdate({domain:e,link:this.linkAssistantStore.domainsReport.rows[this.activeDomain][e][t.postIndex].links[t.phraseIndex]}).then(this.refreshTable).then(()=>{this.wpTableKey++,this.$emit("updated")}).finally(()=>{this.wpTableLoading=!1}))},maybeDoBulkAction({action:t,selectedRows:e}){!t||!e.length||(this.action=t,this.selectedRows=e,this.showModal=!0)},doBulkAction(){if(this.showModal=!1,this.action==="delete")return this.wpTableLoading=!0,this.linkAssistantStore.domainsReportInnerBulk({searchTerm:this.searchTerm,action:this.action,domainIndex:this.activeDomain,linkIndexes:this.selectedRows,offset:this.pageNumber===1?0:(this.pageNumber-1)*this.resultsPerPage}).finally(()=>{this.refreshTable().then(()=>{this.$emit("updated"),this.wpTableLoading=!1})})}},created(){this.pageNumber=this.initialPageNumber}},Ot={class:"domains-report-inner"},Ft=["href"],Vt={class:"row-actions"},Nt={class:"view"},qt=["href"],Ut={class:"edit"},Kt=["href"],Et={class:"date"};function zt(t,e,p,a,s,n){const w=o("link-assistant-editable-phrase"),A=o("svg-trash"),S=o("core-tooltip"),T=o("core-wp-table"),P=o("link-assistant-confirmation-modal");return d(),I("div",Ot,[(d(),_(T,{class:"link-assistant-inner-table","bulk-options":s.bulkOptions,columns:n.columns,id:n.tableId,"initial-page-number":t.pageNumber,key:s.wpTableKey,loading:t.wpTableLoading,rows:p.rows,"show-pagination":n.shouldShowPagination,"show-search":!1,"show-table-footer":!1,totals:p.rows[0].totals,onPaginate:t.processPagination,onProcessBulkAction:n.maybeDoBulkAction},{post_title:l(({row:m})=>[i("strong",null,[i("a",{class:"edit-link",href:m.context.permalink,target:"_blank"},r(m.context.postTitle),9,Ft)]),i("div",Vt,[i("span",Nt,[i("a",{href:m.context.permalink,target:"_blank"},r(t.viewPost(m.context.postType.singular)),9,qt),b(" | ")]),i("span",Ut,[i("a",{href:m.context.editLink,target:"_blank"},r(t.editPost(m.context.postType.singular)),9,Kt)])])]),phrases:l(({row:m,index:g})=>[u(w,{row:m,rowIndex:g,activeRow:s.activePost,domainsReport:"",onDelete:n.deleteLink,onToggleShowMorePhrases:n.toggleShowMorePhrases,onSaveModifiedPhrase:n.saveModifiedPhrase},null,8,["row","rowIndex","activeRow","onDelete","onToggleShowMorePhrases","onSaveModifiedPhrase"])]),publish_date:l(({row:m})=>[i("span",Et,r(t.dateSqlToLocal(m.context.publishDate,"MMMM d, yyyy")),1)]),delete:l(({index:m})=>[u(S,{type:"action"},{tooltip:l(()=>[b(r(s.strings.delete),1)]),default:l(()=>[u(A,{onClick:g=>n.maybeDoBulkAction({action:"delete",selectedRows:[m]})},null,8,["onClick"])]),_:2},1024)]),_:1},8,["bulk-options","columns","id","initial-page-number","loading","rows","show-pagination","totals","onPaginate","onProcessBulkAction"])),u(P,{show:s.showModal,strings:s.modalStrings,selectedRows:s.selectedRows,onDoBulkAction:n.doBulkAction,onCloseModal:e[0]||(e[0]=m=>s.showModal=!1)},null,8,["show","strings","selectedRows","onDoBulkAction"])])}const Ht=$(Bt,[["render",zt]]),Yt={setup(){const t=x();return{linkAssistantStore:t,settingsStore:W(),fetchData:t.fetchDomainsReport}},mixins:[M],components:{CoreWpTable:F,DomainsReportInner:Ht,LinkAssistantConfirmationModal:N,SvgCaret:at,SvgFile:bt,SvgLinkExternal:O},beforeMount(){this.$route.query&&(this.$route.query.hostname&&(this.searchTerm=this.$route.query.hostname,this.processSearch(this.$route.query.hostname)),this.$route.query.fullReport&&(this.searchTerm="",this.processPagination(1)))},data(){return{numbers:Q,tableId:"aioseo-link-assistant-domains-report-wp-table",changeItemsPerPageSlug:"linkAssistantDomainsReport",innerTableKey:0,activeRow:-1,showModal:!1,selectedRows:null,action:null,bulkOptions:[{label:this.$t.__("Delete",this.$tdPro),value:"delete"}],strings:{view:this.$t.__("View",this.$tdPro),deleteAllLinks:this.$t.__("Delete All Links",this.$tdPro)},modalStrings:{areYouSureSingle:this.$t.__("Are you sure you want to delete all links for this domain?",this.$tdPro),areYouSureMultiple:this.$t.__("Are you sure you want to delete all links for these domains?",this.$tdPro),areYouSureAll:this.$t.__("Are you sure you want to delete all links for all domains?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),yesSingle:this.$t.__("Yes, I want to delete this link",this.$tdPro),yesMultiple:this.$t.__("Yes, I want to delete these links",this.$tdPro),yesAll:this.$t.__("Yes, I want to delete all links",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}}},computed:{columns(){return[{slug:"domain",label:this.$t.__("Domain",this.$tdPro)},{slug:"posts",label:this.$t.__("Posts",this.$tdPro),width:"90px"},{slug:"links",label:this.$t.__("Links",this.$tdPro),width:"90px"},{slug:"toggle-button",label:"",width:"60px"}]}},methods:{postCount(t){const e=Object.keys(t)[0];return t[e][0].totals.total},linkCount(t){const e=Object.keys(t)[0];return t[e][0].totals.totalLinks},isRowActive(t){return t===this.activeRow},toggleRow(t){if(this.activeRow===t){this.activeRow=-1;return}this.activeRow=t},maybeDoBulkAction({action:t,selectedRows:e}){e===!1||!t||(this.action=t,this.selectedRows=e,this.showModal=!0)},doBulkAction(){return this.showModal=!1,this.wpTableLoading=!0,this.linkAssistantStore.domainsReportBulk({action:this.action,searchTerm:this.searchTerm,rowIndexes:this.selectedRows}).then(this.processFetchTableData).finally(()=>{this.activeRow=-1,this.wpTableLoading=!1,this.wpTableKey++})},getInnerDomain(t){return Object.keys(t)[0]},getInnerDomainRows(t){return t[this.getInnerDomain(t)]},doProcessPagination(t){this.processPagination(t),this.activeRow=-1},doProcessSearch(t){this.processSearch(t),this.activeRow=-1}}},jt={class:"aioseo-link-assistant-domains-report"},Gt={class:"domain-name"},Jt=["onClick"],Wt=["src"],Qt={class:"row-actions"},Xt=["href"],Zt=["onClick"],ts=["onClick"];function ss(t,e,p,a,s,n){const w=o("svg-file"),A=o("svg-link-external"),S=o("svg-caret"),T=o("domains-report-inner"),P=o("core-wp-table"),m=o("link-assistant-confirmation-modal");return d(),I("div",jt,[(d(),_(P,{ref:"table","bulk-options":s.bulkOptions,columns:n.columns,id:s.tableId,"initial-items-per-page":a.settingsStore.settings.tablePagination.linkAssistantDomainsReport,"initial-page-number":t.pageNumber,"initial-search-term":t.searchTerm,key:t.wpTableKey,loading:t.wpTableLoading,rows:a.linkAssistantStore.domainsReport.rows,totals:a.linkAssistantStore.domainsReport.totals,"show-items-per-page":"",onPaginate:n.doProcessPagination,onProcessBulkAction:n.maybeDoBulkAction,onProcessChangeItemsPerPage:t.processChangeItemsPerPage,onSearch:n.doProcessSearch,onSortColumn:t.processSort},{domain:l(({row:g,index:v,editRow:c})=>[i("div",Gt,[i("a",{href:"#",class:C({active:n.isRowActive(v)}),onClick:D(y=>{c(v),n.toggleRow(v)},["prevent"])},[i("img",{alt:"Domain Favicon",class:"favicon",src:`https://www.google.com/s2/favicons?sz=32&domain=${Object.keys(g)[0]}`},null,8,Wt),i("span",null,r(Object.keys(g)[0]),1)],10,Jt)]),i("div",Qt,[i("span",null,[i("a",{class:"view",href:"https://"+Object.keys(g)[0],target:"_blank"},[i("span",null,r(s.strings.view),1)],8,Xt),b(" | ")]),i("span",null,[i("a",{class:"delete-all-links",href:"#",onClick:D(y=>n.maybeDoBulkAction({action:"delete",selectedRows:v}),["prevent"])},[i("span",null,r(s.strings.deleteAllLinks),1)],8,Zt)])])]),posts:l(({row:g})=>[i("div",null,[u(w),i("span",null,r(s.numbers.numberFormat(n.postCount(g))),1)])]),links:l(({row:g})=>[i("div",null,[u(A),i("span",null,r(s.numbers.numberFormat(n.linkCount(g))),1)])]),"toggle-button":l(({index:g,editRow:v})=>[i("button",{class:C(["toggle-row-button",{active:n.isRowActive(g)}]),onClick:c=>{v(g),n.toggleRow(g)}},[u(S)],10,ts)]),"edit-row":l(({row:g})=>[(d(),_(T,{key:s.innerTableKey,domain:n.getInnerDomain(g),rows:n.getInnerDomainRows(g),activeDomain:s.activeRow,onUpdated:e[0]||(e[0]=v=>s.innerTableKey++)},null,8,["domain","rows","activeDomain"]))]),_:1},8,["bulk-options","columns","id","initial-items-per-page","initial-page-number","initial-search-term","loading","rows","totals","onPaginate","onProcessBulkAction","onProcessChangeItemsPerPage","onSearch","onSortColumn"])),u(m,{show:s.showModal,strings:s.modalStrings,selectedRows:s.selectedRows,onDoBulkAction:n.doBulkAction,onCloseModal:e[1]||(e[1]=g=>s.showModal=!1)},null,8,["show","strings","selectedRows","onDoBulkAction"])])}const es=$(Yt,[["render",ss]]),dt={emits:["updatingLinks"],computed:{isPrioritizedPost(){let e=x().linksReport.prioritizedPosts;return Array.isArray(e)&&(e=e.map(Number)),e.includes(parseInt(this.post.ID))}},methods:{doRefresh(){this.refreshLoading=!0,window.aioseoBus.$emit("updatingLinks",!0),x().linksRefresh({postIndex:this.postIndex,postId:this.post.ID,linksReport:!0}).finally(()=>{this.refreshLoading=!1,window.aioseoBus.$emit("updatingLinks",!1),this.refreshTable()})}}},is={setup(){return{linkAssistantStore:x()}},emits:["updatingLinks"],components:{CoreMainTabs:rt,LinkAssistantAffiliate:tt,LinkAssistantExternal:st,LinkAssistantInboundInternal:et,LinkAssistantOutboundInternal:it,LinkAssistantSuggestions:nt,SvgLinkAffiliate:U,SvgLinkExternal:O,SvgLinkInternalInbound:K,SvgLinkInternalOutbound:E,SvgLinkSuggestion:z,SvgRefresh:lt},mixins:[ot,dt,M],props:{post:{type:Object,required:!0},postIndex:{type:Number,required:!0},postId:{type:Number,required:!0},initialActiveTab:String},data(){return{tabsKey:0,activeTab:"inbound-internal",activeSuggestionTab:"suggestions-inbound",refreshLoading:!1,strings:{refresh:this.$t.__("Refresh",this.$tdPro)}}},computed:{tabs(){return[{slug:"inbound-internal",icon:"svg-link-internal-inbound",name:this.$t.sprintf("%1$s %2$s",this.linkAssistantStore.linksReport.counts[this.postIndex].inboundInternal,this.$t.__("Inbound Internal",this.$tdPro))},{slug:"outbound-internal",icon:"svg-link-internal-outbound",name:this.$t.sprintf("%1$s %2$s",this.linkAssistantStore.linksReport.counts[this.postIndex].outboundInternal,this.$t.__("Outbound Internal",this.$tdPro))},{slug:"affiliate",icon:"svg-link-affiliate",name:this.$t.sprintf("%1$s %2$s",this.linkAssistantStore.linksReport.counts[this.postIndex].affiliate,this.$t.__("Affiliate",this.$tdPro))},{slug:"external",icon:"svg-link-external",name:this.$t.sprintf("%1$s %2$s",this.linkAssistantStore.linksReport.counts[this.postIndex].external,this.$t.__("External",this.$tdPro))},{slug:"link-suggestions",icon:"svg-link-suggestion",name:this.$t.sprintf("%1$s %2$s",this.linkAssistantStore.linksReport.counts[this.postIndex].suggestionsOutbound+this.linkAssistantStore.linksReport.counts[this.postIndex].suggestionsInbound,this.$t.__("Link Suggestions",this.$tdPro))}]}},methods:{fetchData(t){window.aioseoBus.$emit("updatingLinks",!0);const e={...t,additionalFilters:{postId:this.post.ID,postIndex:this.postIndex,type:this.suggestionType}};return this.linkAssistantStore.fetchLinksReportInner(e).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1)})},processChangeTab(t,e){this.activeTab=t,e&&(this.activeSuggestionTab=e)}},mounted(){this.initialActiveTab&&this.$nextTick(()=>{this.processChangeTab(this.initialActiveTab)})}},ns={class:"links-report-inner"};function os(t,e,p,a,s,n){const w=o("svg-refresh"),A=o("base-button"),S=o("core-main-tabs"),T=o("link-assistant-outbound-internal"),P=o("link-assistant-inbound-internal"),m=o("link-assistant-affiliate"),g=o("link-assistant-external"),v=o("link-assistant-suggestions");return d(),I("div",ns,[(d(),_(S,{class:"link-tabs",internal:"",key:s.tabsKey,tabs:n.tabs,active:s.activeTab,onChanged:e[0]||(e[0]=c=>n.processChangeTab(c))},{"var-tab-icon":l(({tab:c})=>[(d(),_(q(c.icon),{class:C([{warning:c.warning}])},null,8,["class"]))]),button:l(()=>[u(A,{class:"button-refresh",type:"gray",size:"medium",loading:s.refreshLoading,disabled:t.isPrioritizedPost,onClick:t.doRefresh},{default:l(()=>[u(w),b(" "+r(s.strings.refresh),1)]),_:1},8,["loading","disabled","onClick"])]),_:1},8,["tabs","active"])),s.activeTab==="outbound-internal"?(d(),_(T,{key:0,post:p.post,postIndex:p.postIndex,postId:p.postId,linksReport:"",onOpenSuggestions:e[1]||(e[1]=c=>n.processChangeTab("link-suggestions","suggestions-outbound")),onLinksUpdated:e[2]||(e[2]=c=>s.tabsKey++)},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="inbound-internal"?(d(),_(P,{key:1,post:p.post,postIndex:p.postIndex,postId:p.postId,linksReport:"",onOpenSuggestions:e[3]||(e[3]=c=>n.processChangeTab("link-suggestions","suggestions-inbound")),onLinksUpdated:e[4]||(e[4]=c=>s.tabsKey++)},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="affiliate"?(d(),_(m,{key:2,post:p.post,postIndex:p.postIndex,postId:p.postId,onLinksUpdated:e[5]||(e[5]=c=>s.tabsKey++),linksReport:""},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="external"?(d(),_(g,{key:3,post:p.post,postIndex:p.postIndex,postId:p.postId,onLinksUpdated:e[6]||(e[6]=c=>s.tabsKey++),linksReport:""},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="link-suggestions"?(d(),_(v,{key:4,post:p.post,postIndex:p.postIndex,postId:p.postId,filteredSuggestionsOutbound:t.filteredSuggestionsOutbound(p.post),initialTab:s.activeSuggestionTab,linksReport:"",onShowStandalone:e[7]||(e[7]=c=>t.showStandalone=!0),onSuggestionsTabChanged:e[8]||(e[8]=c=>s.activeSuggestionTab=c),onLinksUpdated:e[9]||(e[9]=c=>s.tabsKey++)},null,8,["post","postIndex","postId","filteredSuggestionsOutbound","initialTab"])):f("",!0)])}const as=$(is,[["render",os]]),rs={setup(){const t=x(),e=W();return{linkAssistantStore:t,settingsStore:e,fetchData:t.fetchLinksReport}},mixins:[V,M,X],components:{CoreTooltip:Z,CoreWpTable:F,LinkAssistantConfirmationModal:N,LinksReportInner:as,SvgCaret:at,SvgLinkAffiliate:U,SvgLinkExternal:O,SvgLinkInternalInbound:K,SvgLinkInternalOutbound:E,SvgLinkSuggestion:z},data(){return{numbers:Q,tableId:"aioseo-link-assistant-links-report-wp-table",changeItemsPerPageSlug:"linkAssistantLinksReport",initialActiveTab:"inbound-internal",innerTableKey:0,activeRow:-1,showModal:!1,selectedRows:null,bulkAction:null,selectedFilters:{},additionalFilters:null,strings:{deleteAllLinks:this.$t.__("Delete All Links",this.$tdPro),inboundInternal:this.$t.sprintf(this.$t.__("%1$sInbound Internal Links%2$sLinks from other posts to this post",this.$tdPro),"<strong>","</strong><br />"),outboundInternal:this.$t.sprintf(this.$t.__("%1$sOutbound Internal Links%2$sLinks from this post to other posts",this.$tdPro),"<strong>","</strong><br />")},modalStrings:{areYouSureSingle:this.$t.__("Are you sure you want to delete all links for this post?",this.$tdPro),actionCannotBeUndone:this.$t.__("This action cannot be undone.",this.$tdPro),yesSingle:this.$t.__("Yes, I want to delete all links",this.$tdPro),noChangedMind:this.$t.__("No, I changed my mind",this.$tdPro)}}},computed:{columns(){return[{slug:"post_title",label:this.$t.__("Post Title",this.$tdPro),width:"100%"},{slug:"publish_date",label:this.$t.__("Publish Date",this.$tdPro),width:"170px"},{slug:"internal",label:this.$t.__("Internal",this.$tdPro),width:"150px"},{slug:"affiliate",label:this.$t.__("Affiliate",this.$tdPro),width:"90px"},{slug:"external",label:this.$t.__("External",this.$tdPro),width:"90px"},{slug:"suggestions",label:this.$t.__("Suggestions",this.$tdPro),width:"110px"},{slug:"toggle-button",label:"",width:"60px"}]}},methods:{getPostId(t){return parseInt(t)},isRowActive(t){return t===this.activeRow},maybeEditRow(t,e,p,a){if(!p){this.initialActiveTab=t,e(a),this.toggleRow(a);return}if(this.initialActiveTab===t){e(a),this.toggleRow(a);return}this.initialActiveTab=t,this.innerTableKey++},toggleRow(t){if(this.activeRow===t){this.activeRow=-1;return}this.activeRow=t},maybeDeleteAllLinks(t){t!==!1&&(this.selectedRows=t,this.showModal=!0)},deleteAllLinks(){this.showModal=!1;const t=this.linkAssistantStore.linksReport.rows[this.selectedRows].ID;if(t)return this.wpTableLoading=!0,this.linkAssistantStore.linksReportDeleteAll({postId:t}).finally(()=>{this.activeRow=-1,this.wpTableKey++,this.refreshTable()})},processAdditionalFilterOptionSelected({name:t,selectedValue:e}){t==="post-type"&&(this.selectedFilters["post-type"]=e,this.selectedFilters.term="all"),this.additionalFilters=this.linkAssistantStore.linksReport.additionalFilters.filter(p=>p.name==="post-type"||p.dependsOn&&this.selectedFilters["post-type"]===p.dependsOn.value)},resetSelectedFilters(){this.selectedFilters.term="all",this.selectedFilters["post-type"]="",this.processAdditionalFilterOptionSelected({name:"post-type",selectedValue:""})},doProcessPagination(t){this.processPagination(t),this.activeRow=-1},doProcessSearch(t){this.processSearch(t),this.activeRow=-1},doProcessFilterTable(t){this.processFilterTable(t),this.activeRow=-1},doProcessAdditionalFilters(t){this.processAdditionalFilters(t),this.activeRow=-1}},beforeMount(){this.additionalFilters=this.linkAssistantStore.linksReport.additionalFilters.filter(t=>t.name==="post-type"||t.dependsOn&&this.selectedFilters["post-type"]===t.dependsOn.value),this.$route.query&&(Object.entries(this.$route.query).forEach(t=>{switch(t[0]){case"fullReport":this.processFilterTable({slug:"all"});break;case"postTitle":this.searchTerm=this.$route.query.postTitle,this.processSearch(this.searchTerm);break;case"linkingOpportunities":this.processFilterTable({slug:"linking-opportunities"});break;case"orphaned-posts":this.processFilterTable({slug:"orphaned-posts"});break}}),this.linkAssistantStore.setLinksReportCounts())}},ls={class:"aioseo-link-assistant-links-report"},ds={class:"post-title"},ps=["onClick"],us={key:0,class:"post-status-badge draft"},cs={key:1,class:"post-status-badges"},hs={class:"post-status-badge future"},gs={class:"post-status-badge future"},ms={class:"row-actions"},_s=["href"],ks=["href"],fs=["onClick"],bs={key:0,class:"date"},Ss={class:"internal-links-count"},Ps=["onClick"],ws={class:"aioseo-tooltip-wrapper"},vs=["innerHTML"],ys=["onClick"],Is={class:"aioseo-tooltip-wrapper"},As=["innerHTML"],Ts=["onClick"],Rs=["onClick"],xs=["onClick"],$s=["onClick"];function Ls(t,e,p,a,s,n){const w=o("svg-link-internal-inbound"),A=o("core-tooltip"),S=o("svg-link-internal-outbound"),T=o("svg-link-suggestion"),P=o("svg-link-affiliate"),m=o("svg-link-external"),g=o("svg-caret"),v=o("LinksReportInner"),c=o("core-wp-table"),y=o("link-assistant-confirmation-modal");return d(),I("div",ls,[(d(),_(c,{ref:"table",class:"posts-table",id:s.tableId,"additional-filters":s.additionalFilters,columns:n.columns,filters:a.linkAssistantStore.linksReport.filters,"initial-items-per-page":a.settingsStore.settings.tablePagination.linkAssistantLinksReport,"initial-page-number":t.pageNumber,"initial-search-term":t.searchTerm,key:t.wpTableKey,loading:t.wpTableLoading,rows:a.linkAssistantStore.linksReport.rows,"selected-filters":s.selectedFilters,"show-bulk-actions":!1,totals:a.linkAssistantStore.linksReport.totals,"show-items-per-page":"",onAdditionalFilterOptionSelected:n.processAdditionalFilterOptionSelected,onFilterTable:n.doProcessFilterTable,onPaginate:n.doProcessPagination,onProcessAdditionalFilters:n.doProcessAdditionalFilters,onProcessChangeItemsPerPage:t.processChangeItemsPerPage,onSearch:n.doProcessSearch,onSortColumn:t.processSort},{post_title:l(({row:h,index:k,editRow:R})=>{var L,H,Y,j,G,J;return[i("div",ds,[i("a",{href:"#",class:C({active:n.isRowActive(k)}),onClick:D(pt=>{R(k),n.toggleRow(k)},["prevent"])},[i("span",null,r(h.context.postTitle),1),["draft","private","pending"].includes(h.post_status)?(d(),I("span",us,r((Y=(H=(L=h.context)==null?void 0:L.postStatus)==null?void 0:H.label)==null?void 0:Y.toUpperCase()),1)):f("",!0),h.post_status==="future"?(d(),I("span",cs,[i("span",hs,r((J=(G=(j=h.context)==null?void 0:j.postStatus)==null?void 0:G.label)==null?void 0:J.toUpperCase()),1),i("span",gs,r(t.dateSqlToLocal(h.post_date,"MMMM d, yyyy").toUpperCase()),1)])):f("",!0)],10,ps)]),i("div",ms,[i("span",null,[i("a",{class:"view",href:h.context.permalink,target:"_blank"},[i("span",null,r(t.viewPost(h.context.postType.singular)),1)],8,_s),b(" | ")]),i("span",null,[i("a",{class:"edit",href:h.context.editLink,target:"_blank"},[i("span",null,r(t.editPost(h.context.postType.singular)),1)],8,ks),b(" | ")]),i("span",null,[i("a",{class:"delete-all-links",href:"#",onClick:D(pt=>n.maybeDeleteAllLinks(k),["prevent"])},[i("span",null,r(s.strings.deleteAllLinks),1)],8,fs)])])]}),publish_date:l(({row:h})=>[h.post_status==="publish"?(d(),I("span",bs,r(t.dateSqlToLocal(h.post_date,"MMMM d, yyyy")),1)):f("",!0)]),internal:l(({editRow:h,index:k,editRowActive:R})=>[i("div",Ss,[i("div",{onClick:L=>n.maybeEditRow("inbound-internal",h,R,k)},[i("div",ws,[u(A,{class:"action"},{tooltip:l(()=>[i("span",{innerHTML:s.strings.inboundInternal},null,8,vs)]),default:l(()=>[u(w),i("span",null,r(s.numbers.numberFormat(a.linkAssistantStore.linksReport.counts[k].inboundInternal)),1)]),_:2},1024)])],8,Ps),i("div",{onClick:L=>n.maybeEditRow("outbound-internal",h,R,k)},[i("div",Is,[u(A,{class:"action"},{tooltip:l(()=>[i("span",{innerHTML:s.strings.outboundInternal},null,8,As)]),default:l(()=>[u(S),i("span",null,r(s.numbers.numberFormat(a.linkAssistantStore.linksReport.counts[k].outboundInternal)),1)]),_:2},1024)])],8,ys)])]),suggestions:l(({editRow:h,index:k,editRowActive:R})=>[i("div",{onClick:L=>n.maybeEditRow("link-suggestions",h,R,k)},[u(T),b(" "+r(s.numbers.numberFormat(a.linkAssistantStore.linksReport.counts[k].suggestionsInbound+a.linkAssistantStore.linksReport.counts[k].suggestionsOutbound)),1)],8,Ts)]),affiliate:l(({editRow:h,index:k,editRowActive:R})=>[i("div",{onClick:L=>n.maybeEditRow("affiliate",h,R,k)},[u(P),b(" "+r(s.numbers.numberFormat(a.linkAssistantStore.linksReport.counts[k].affiliate)),1)],8,Rs)]),external:l(({editRow:h,index:k,editRowActive:R})=>[i("div",{onClick:L=>n.maybeEditRow("external",h,R,k)},[u(m),b(" "+r(s.numbers.numberFormat(a.linkAssistantStore.linksReport.counts[k].external)),1)],8,xs)]),"toggle-button":l(({index:h,editRow:k})=>[i("button",{class:C(["toggle-row-button",{active:n.isRowActive(h)}]),onClick:R=>{k(h),n.toggleRow(h)}},[u(g)],10,$s)]),"edit-row":l(({row:h,index:k})=>[(d(),_(v,{key:s.innerTableKey,post:h,postIndex:k,postId:n.getPostId(h.ID),initialActiveTab:s.initialActiveTab},null,8,["post","postIndex","postId","initialActiveTab"]))]),_:1},8,["id","additional-filters","columns","filters","initial-items-per-page","initial-page-number","initial-search-term","loading","rows","selected-filters","totals","onAdditionalFilterOptionSelected","onFilterTable","onPaginate","onProcessAdditionalFilters","onProcessChangeItemsPerPage","onSearch","onSortColumn"])),u(y,{show:s.showModal,selectedRows:s.selectedRows,strings:s.modalStrings,onDoBulkAction:n.deleteAllLinks,onCloseModal:e[0]||(e[0]=h=>s.showModal=!1)},null,8,["show","selectedRows","strings","onDoBulkAction"])])}const Cs=$(rs,[["render",Ls]]),Ds={setup(){const t=x();return{linkAssistantStore:t,fetchData:t.fetchPostReport}},emits:["updatingLinks"],components:{CoreMainTabs:rt,LinkAssistantAffiliate:tt,LinkAssistantExternal:st,LinkAssistantInboundInternal:et,LinkAssistantOutboundInternal:it,LinkAssistantSuggestions:nt,SvgLinkAffiliate:U,SvgLinkExternal:O,SvgLinkInternalInbound:K,SvgLinkInternalOutbound:E,SvgLinkSuggestion:z,SvgRefresh:lt},mixins:[V,ot,dt,M],data(){return{changeItemsPerPageSlug:"linkAssistantPostsReport",postId:null,postIndex:0,post:{},activeTab:"inbound-internal",activeSuggestionTab:"suggestions-inbound",refreshLoading:!1,loadTime:4,showLoadingBar:!1,loadingInitialData:!1,strings:{backToLinksReport:this.$t.__("Back to Links Report",this.$tdPro),loadingHeader:this.$t.__("Loading Link Suggestions. Please wait...",this.$tdPro),refresh:this.$t.__("Refresh",this.$tdPro)}}},computed:{getPost(){return{...this.post,links:this.linkAssistantStore.postReport}},header(){return this.$t.sprintf(this.$t.__('Internal Links & Suggestions for "%1$s"',this.$tdPro),this.post.context.postTitle)},tabs(){return[{slug:"inbound-internal",icon:"svg-link-internal-inbound",name:this.$t.sprintf("%1$s %2$s",this.post.links.inboundInternal.totals.total,this.$t.__("Inbound Internal",this.$tdPro))},{slug:"outbound-internal",icon:"svg-link-internal-outbound",name:this.$t.sprintf("%1$s %2$s",this.post.links.outboundInternal.totals.total,this.$t.__("Outbound Internal",this.$tdPro))},{slug:"affiliate",icon:"svg-link-affiliate",name:this.$t.sprintf("%1$s %2$s",this.post.links.affiliate.totals.total,this.$t.__("Affiliate",this.$tdPro))},{slug:"external",icon:"svg-link-external",name:this.$t.sprintf("%1$s %2$s",this.post.links.external.totals.total,this.$t.__("External",this.$tdPro))},{slug:"link-suggestions",icon:"svg-link-suggestion",name:this.$t.sprintf("%1$s %2$s",this.post.links.suggestionsOutbound.totals.total+this.post.links.suggestionsInbound.totals.total,this.$t.__("Link Suggestions",this.$tdPro))}]}},methods:{closePostReport(){this.$router.push({name:"links-report"})},processChangeTab(t,e){this.activeTab=t,e&&(this.activeSuggestionTab=e)},doRefresh(){this.refreshLoading=!0,window.aioseoBus.$emit("updatingLinks",!0),this.linkAssistantStore.linksRefresh({postIndex:this.postIndex,postId:this.post.ID,postReport:!0}).finally(()=>{this.refreshLoading=!1,window.aioseoBus.$emit("updatingLinks",!1),this.refreshTable()})},checkProgress(){this.showLoadingBar=!1,this.loadingInitialData&&this.$nextTick(()=>{this.showLoadingBar=!0,2>this.loadTime&&(this.loadTime=4),this.loadTime=this.loadTime/2,setTimeout(this.checkProgress,this.loadTime*1e3)})}},beforeMount(){if(this.$route.query){if(!this.$route.query.postId){this.$router.push({name:"links-report"});return}this.postId=parseInt(this.$route.query.postId),this.postIndex=parseInt(this.$route.query.postIndex),this.activeTab=this.$route.query.initialTab,this.activeSuggestionTab=this.$route.query.initialSuggestionTab,this.post={ID:this.postId,context:{postType:{singular:null}},links:{...this.linkAssistantStore.postReport}}}},mounted(){this.linkAssistantStore.resetPostReportState(),window.aioseoBus.$emit("updatingLinks",!0),this.showLoadingBar=!0,this.loadingInitialData=!0,setTimeout(this.checkProgress,this.loadTime*1e3),this.filter="all",this.processFetchTableData({postId:this.postId}).then(t=>{t.body.links&&(this.post.links=t.body.links),t.body.context&&(this.post.context=t.body.context),this.linkAssistantStore.postReport={...t.body.links}}).catch(t=>{console.error(t),this.$router.push({name:"links-report"})}).finally(()=>{window.aioseoBus.$emit("updatingLinks",!1),this.showLoadingBar=!1,this.loadingInitialData=!1})}},Ms={class:"aioseo-link-assistant-post-report"},Bs={key:0,class:"header-container"},Os={class:"first-row"},Fs={class:"second-row"},Vs={class:"first-column"},Ns={class:"header"},qs={key:1,class:"load-progress"},Us={key:2,class:"header-container"},Ks={class:"first-row"},Es={class:"second-row"},zs={class:"first-column"},Hs={class:"header"},Ys={class:"actions"},js=["href"],Gs=["href"],Js={class:"second-column"};function Ws(t,e,p,a,s,n){const w=o("svg-refresh"),A=o("base-button"),S=o("core-main-tabs"),T=o("link-assistant-outbound-internal"),P=o("link-assistant-inbound-internal"),m=o("link-assistant-affiliate"),g=o("link-assistant-external"),v=o("link-assistant-suggestions");return d(),I("div",Ms,[s.loadingInitialData?(d(),I("div",Bs,[i("div",Os,[i("a",{href:"#",onClick:e[0]||(e[0]=D((...c)=>n.closePostReport&&n.closePostReport(...c),["stop","prevent"]))},[b(" ← "),i("span",null,r(s.strings.backToLinksReport),1)])]),i("div",Fs,[i("div",Vs,[i("span",Ns,r(s.strings.loadingHeader),1)])])])):f("",!0),s.showLoadingBar?(d(),I("div",qs,[i("div",{class:"load-progress-value",style:St({animationDuration:s.loadTime+"s"})},null,4)])):f("",!0),s.loadingInitialData?f("",!0):(d(),I("div",Us,[i("div",Ks,[i("a",{href:"#",onClick:e[1]||(e[1]=D((...c)=>n.closePostReport&&n.closePostReport(...c),["prevent"]))},[b(" ← "),i("span",null,r(s.strings.backToLinksReport),1)])]),i("div",Es,[i("div",zs,[i("span",Hs,r(n.header),1),i("div",Ys,[i("a",{class:"view-post-link",href:s.post.context.permalink,target:"_blank"},r(t.viewPost(s.post.context.postType.singular)),9,js),b(" | "),i("a",{class:"edit-post-link",href:s.post.context.editLink,target:"_blank"},r(t.editPost(s.post.context.postType.singular)),9,Gs)])]),i("div",Js,[u(A,{type:"blue",tag:"button",loading:s.refreshLoading,disabled:t.isPrioritizedPost,onClick:n.doRefresh},{default:l(()=>[u(w),b(" "+r(s.strings.refresh),1)]),_:1},8,["loading","disabled","onClick"])])])])),u(S,{class:"link-tabs",internal:"",tabs:n.tabs,active:s.activeTab,showSaveButton:!1,onChanged:e[2]||(e[2]=c=>n.processChangeTab(c))},{"var-tab-icon":l(({tab:c})=>[(d(),_(q(c.icon),{class:C([{warning:c.warning}])},null,8,["class"]))]),_:1},8,["tabs","active"]),s.activeTab==="outbound-internal"?(d(),_(T,{key:3,post:n.getPost,postIndex:s.postIndex,postId:s.postId,"post-report":"",onOpenSuggestions:e[3]||(e[3]=c=>n.processChangeTab("link-suggestions","suggestions-outbound"))},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="inbound-internal"?(d(),_(P,{key:4,post:n.getPost,postIndex:s.postIndex,postId:s.postId,"post-report":"",onOpenSuggestions:e[4]||(e[4]=c=>n.processChangeTab("link-suggestions","suggestions-inbound"))},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="affiliate"?(d(),_(m,{key:5,post:n.getPost,postIndex:s.postIndex,postId:s.postId,"post-report":""},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="external"?(d(),_(g,{key:6,post:n.getPost,postIndex:s.postIndex,postId:s.postId,"post-report":""},null,8,["post","postIndex","postId"])):f("",!0),s.activeTab==="link-suggestions"?(d(),_(v,{key:7,post:n.getPost,postIndex:s.postIndex,postId:s.postId,filteredSuggestionsOutbound:t.filteredSuggestionsOutbound(s.post),initialTab:s.activeSuggestionTab,"post-report":"",onShowStandalone:e[5]||(e[5]=c=>t.showStandalone=!0),onSuggestionsTabChanged:e[6]||(e[6]=c=>s.activeSuggestionTab=c)},null,8,["post","postIndex","postId","filteredSuggestionsOutbound","initialTab"])):f("",!0)])}const Qs=$(Ds,[["render",Ws]]),Xs={setup(){return{rootStore:ct()}},components:{BaseHighlightToggle:$t,CoreAlert:vt,GridColumn:Lt,GridRow:Ct},props:{type:{type:String,required:!0},options:{type:Object,required:!0},registeredPostStatuses:Object,excluded:{type:Array,default(){return[]}}},data(){return{strings:{label:this.$t.__("Label:",this.$td),name:this.$t.__("Status:",this.$td),noPostStatuses:this.$t.__("No post statuses available.",this.$td),noTaxonomies:this.$t.__("No taxonomies available.",this.$td),noPostStatusesDescription:this.$t.__("All post statuses are set to noindex or your site does not have any post statuses registered that are supported by this feature.",this.$td),noTaxonomiesDescription:this.$t.__("All taxonomies are set to noindex or your site does not have any taxonomies registered that are supported by this feature.",this.$td)}}},computed:{getRegisteredPostStatuses(){return this.registeredPostStatuses||this.rootStore.aioseo.postData},postStatuses(){return this.getRegisteredPostStatuses[this.type].filter(t=>!this.excluded.includes(t.status))}},methods:{emitInput(t){this.$emit("input",t)},updateValue(t,e){if(t){const a=this.options[this.type].included;a.push(e.status),this.options[this.type].included=a;return}const p=this.options[this.type].included.findIndex(a=>a===e.status);p!==-1&&this.options[this.type].included.splice(p,1)},getValue(t){return this.options[this.type].included.includes(t.status)},isActive(t){return this.options[this.type].included.findIndex(p=>p===t.status)!==-1}}},Zs={class:"aioseo-post-status-options-toggle"},te={class:"post-status-options-settings"};function se(t,e,p,a,s,n){const w=o("core-alert"),A=o("base-highlight-toggle"),S=o("grid-column"),T=o("grid-row");return d(),I("div",Zs,[i("div",te,[n.postStatuses.length===0&&p.type==="postStatuses"?(d(),_(w,{key:0,type:"blue"},{default:l(()=>[i("strong",null,r(s.strings.noPostStatuses),1),b(" "+r(s.strings.noPostStatusesDescription),1)]),_:1})):f("",!0),n.postStatuses.length===0&&p.type==="taxonomies"?(d(),_(w,{key:1,type:"blue"},{default:l(()=>[i("strong",null,r(s.strings.noTaxonomies),1),b(" "+r(s.strings.noTaxonomiesDescription),1)]),_:1})):f("",!0),0<n.postStatuses.length?(d(),_(T,{key:2},{default:l(()=>[(d(!0),I(Pt,null,wt(n.postStatuses,(P,m)=>(d(),_(S,{md:"6",key:m},{default:l(()=>[u(A,{size:"medium",active:n.isActive(P),name:P.label,type:"checkbox",modelValue:n.getValue(P),"onUpdate:modelValue":g=>n.updateValue(g,P)},{default:l(()=>[b(r(P.label)+" ("+r(P.status)+") ",1)]),_:2},1032,["active","name","modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})):f("",!0)])])}const ee=$(Xs,[["render",se]]),ie={setup(){return{linkAssistantStore:x()}},components:{BaseCheckbox:At,BaseTextarea:Tt,CoreCard:Rt,CoreExcludePosts:xt,CorePostStatusOptions:ee,CorePostTypeOptions:Dt,CoreSettingsRow:Mt},mixins:[It],data(){return{initialAffiliateLinkPrefixes:"",strings:{settings:this.$t.__("Link Settings",this.$tdPro),postTypes:this.$t.__("Post Types",this.$tdPro),includeAllPostTypes:this.$t.__("Include All Post Types",this.$tdPro),selectPostTypes:this.$t.__("Select which Post Types you want to enable Link Assistant for.",this.$tdPro),postStatuses:this.$t.__("Post Statuses",this.$tdPro),includeAllPostStatuses:this.$t.__("Include All Post Statuses",this.$tdPro),selectPostStatuses:this.$t.__("Select which Post Statuses you want to enable Link Assistant for.",this.$tdPro),skipSentences:this.$t.__("Number of Sentences to Skip at Beginning",this.$tdPro),skipSentencesDescription:this.$t.sprintf(this.$t.__("The amount of sentences at the beginning of the article that %1$s should not suggest internal links for.",this.$tdPro),"AIOSEO"),affiliatePrefix:this.$t.__("Affiliate Link Prefix",this.$tdPro),affiliatePrefixDescription:this.$t.sprintf(this.$t.__('Enter one or multiple link prefixes that %1$s should consider as affiliate links, e.g. "/go/", "/refer/" or "https://amazn.to".',this.$tdPro),"AIOSEO"),excludePostsPages:this.$t.__("Exclude Posts / Pages",this.$tdPro),wordsToIgnore:this.$t.__("Words to Ignore",this.$tdPro)}}},methods:{validateSkipSentences(t){0>t.target.value&&(t.target.value=0)}},beforeMount(){this.initialAffiliateLinkPrefixes=this.linkAssistantStore.options.main.affiliatePrefix,window.aioseoBus.$on("changes-saved",()=>{this.initialAffiliateLinkPrefixes=this.linkAssistantStore.options.main.affiliatePrefix})}},ne={class:"aioseo-link-assistant-settings"},oe={class:"aioseo-description"},ae=["innerHTML"],re={class:"aioseo-description"},le=["innerHTML"],de={class:"aioseo-description"},pe={class:"aioseo-description"};function ue(t,e,p,a,s,n){const w=o("base-checkbox"),A=o("core-post-type-options"),S=o("core-settings-row"),T=o("core-post-status-options"),P=o("base-input"),m=o("base-select"),g=o("core-exclude-posts"),v=o("base-textarea"),c=o("core-card");return d(),I("div",ne,[u(c,{slug:"linkAssistantSettings","header-text":s.strings.settings},{default:l(()=>[u(S,{name:s.strings.postTypes},{content:l(()=>[u(w,{size:"medium",modelValue:a.linkAssistantStore.options.main.postTypes.all,"onUpdate:modelValue":e[0]||(e[0]=y=>a.linkAssistantStore.options.main.postTypes.all=y)},{default:l(()=>[b(r(s.strings.includeAllPostTypes),1)]),_:1},8,["modelValue"]),a.linkAssistantStore.options.main.postTypes.all?f("",!0):(d(),_(A,{key:0,id:"postTypes",options:a.linkAssistantStore.options.main,excluded:["attachment"],type:"postTypes"},null,8,["options"])),i("div",oe,[b(r(s.strings.selectPostTypes)+" ",1),i("span",{innerHTML:t.$links.getDocLink(t.$constants.GLOBAL_STRINGS.learnMore,"linkAssistantPostTypes",!0)},null,8,ae)])]),_:1},8,["name"]),u(S,{name:s.strings.postStatuses},{content:l(()=>[u(w,{size:"medium",modelValue:a.linkAssistantStore.options.main.postStatuses.all,"onUpdate:modelValue":e[1]||(e[1]=y=>a.linkAssistantStore.options.main.postStatuses.all=y)},{default:l(()=>[b(r(s.strings.includeAllPostStatuses),1)]),_:1},8,["modelValue"]),a.linkAssistantStore.options.main.postStatuses.all?f("",!0):(d(),_(T,{key:0,id:"postStatuses",options:a.linkAssistantStore.options.main,type:"postStatuses"},null,8,["options"])),i("div",re,[b(r(s.strings.selectPostStatuses)+" ",1),i("span",{innerHTML:t.$links.getDocLink(t.$constants.GLOBAL_STRINGS.learnMore,"linkAssistantPostStatuses",!0)},null,8,le)])]),_:1},8,["name"]),u(S,{name:s.strings.skipSentences,align:""},{content:l(()=>[u(P,{modelValue:a.linkAssistantStore.options.main.skipSentences,"onUpdate:modelValue":e[2]||(e[2]=y=>a.linkAssistantStore.options.main.skipSentences=y),class:"settings-skip-sentences",type:"number",size:"medium",min:0,onKeyup:e[3]||(e[3]=y=>n.validateSkipSentences(y))},null,8,["modelValue"]),i("div",de,r(s.strings.skipSentencesDescription),1)]),_:1},8,["name"]),u(S,{class:"affiliate-prefix",name:s.strings.affiliatePrefix,align:""},{content:l(()=>[u(m,{multiple:"",taggable:"",options:t.getJsonValue(a.linkAssistantStore.options.main.affiliatePrefix)||[],modelValue:t.getJsonValue(a.linkAssistantStore.options.main.affiliatePrefix)||[],"onUpdate:modelValue":e[4]||(e[4]=y=>a.linkAssistantStore.options.main.affiliatePrefix=t.setJsonValue(y))},null,8,["options","modelValue"]),i("div",pe,r(s.strings.affiliatePrefixDescription),1)]),_:1},8,["name"]),u(S,{name:s.strings.excludePostsPages,align:""},{content:l(()=>[u(g,{options:a.linkAssistantStore.options.main,type:"posts"},null,8,["options"])]),_:1},8,["name"]),u(S,{name:s.strings.wordsToIgnore},{content:l(()=>[u(v,{minHeight:200,autosize:!1,modelValue:a.linkAssistantStore.options.main.wordsToIgnore,"onUpdate:modelValue":e[5]||(e[5]=y=>a.linkAssistantStore.options.main.wordsToIgnore=y)},null,8,["modelValue"])]),_:1},8,["name"])]),_:1},8,["header-text"])])}const ce=$(ie,[["render",ue]]),he={setup(){return{linkAssistantStore:x()}},components:{CoreMain:mt,CoreProcessingPopup:_t,DomainsReport:es,LinksReport:Cs,Overview:yt,PostReport:Qs,Settings:ce},mixins:[ht,gt],data(){return{strings:{pageName:this.$t.__("Link Assistant",this.$td)}}},computed:{excludedTabs(){const t=(B.isActive("aioseo-link-assistant")?this.getExcludedUpdateTabs("aioseo-link-assistant"):this.getExcludedActivationTabs("aioseo-link-assistant"))||[];return t.push("post-report"),t}},mounted(){window.aioseoBus.$on("changes-saved",()=>{this.linkAssistantStore.getMenuData()}),this.$isPro&&this.linkAssistantStore.suggestionsScan.percent!==100&&B.isActive("aioseo-link-assistant")&&!B.requiresUpgrade("aioseo-link-assistant")&&B.hasMinimumVersion("aioseo-link-assistant")&&this.linkAssistantStore.pollSuggestionsScan()}},ge={class:"aioseo-link-assistant"};function me(t,e,p,a,s,n){const w=o("core-main");return d(),I("div",ge,[u(w,{"page-name":s.strings.pageName,"exclude-tabs":n.excludedTabs,showTabs:t.$route.name!=="post-report"},{default:l(()=>[(d(),_(q(t.$route.name)))]),_:1},8,["page-name","exclude-tabs","showTabs"])])}const Fi=$(he,[["render",me]]);export{Fi as default};
